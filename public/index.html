<!DOCTYPE html>
<html>
<head>
    <title>Go Scrcpy WebRTC</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div style="display: flex; flex-direction: row; width: 100%; height: 100%;">
        <div style="flex: 1; display: flex; justify-content: flex-end; align-items: center; background-color: #000; height: 100%;">
            <video id="remoteVideo" autoplay muted playsinline style="max-width: 100%; max-height: 100%; display: block; touch-action: none;"></video>
        </div>
        <div style="width: 3rem;">
            这靠右边的一列显示控制按钮，比如电源键，音量键等
            <button onclick="start()" style="width: 100%;height: 1.5rem;">连接</button>
            <button onclick="homeButton()" style="width: 100%;height: 1.5rem;">主页</button>
            <button onclick="volumeUpButton()" style="width: 100%;height: 1.5rem;">音量加</button>
            <button onclick="volumeDownButton()" style="width: 100%;height: 1.5rem;">音量减</button>
            <button onclick="powerButton()" style="width: 100%;height: 1.5rem;">电源键</button>

    </div>
    <br/>
    <script>
        window.ws = new WebSocket('ws://' + window.location.host + '/ws');
        window.ws.onopen = () => console.log('WebSocket connected');
        window.ws.onmessage = (event) => {
            console.log('Received message from server:', event.data);
        };
        // Debounce/Throttle check
        let checkTimeout;
        function triggerCheck() {
            clearTimeout(checkTimeout);
            checkTimeout = setTimeout(checkOrientation, 500);
        }

        window.addEventListener('resize', triggerCheck);
        

        // start();
    </script>
    <script src="static/buttons.js"></script>
    <script src="static/sync.js"></script>
    <script src="static/controlMessages.js"></script>
    <script src="static/connect.js"></script> 
    <script src="static/touch.js"></script>
</body>
</html>